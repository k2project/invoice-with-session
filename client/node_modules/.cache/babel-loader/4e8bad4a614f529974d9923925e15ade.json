{"ast":null,"code":"import axios from 'axios';\nimport { dialogBox } from '../../alerts/alertsFuns';\nexport const alertUnsavedChanges = async (initilState, state, setStateTab, setUpdates, history) => {\n  if (JSON.stringify(state) !== JSON.stringify(initilState)) {\n    // history.push('/dashboard/profile');\n    history.block((location, action) => {\n      // The location and action arguments indicate the location\n      // we're transitioning to and how we're getting there.\n      // A common use case is to prevent the user from leaving the\n      // page if there's a form they haven't submitted yet.\n      return 'Are you sure you want to leave this page?';\n    });\n    setStateTab('form');\n    const msg = `You have some unsaved changes. What would you like to do?`;\n    const cancelBtnText = 'Discharge changes';\n    const confirmBtnText = 'Return to the form!';\n\n    const cancelCb = () => {\n      //discharge all changes and clear app changes status\n      window.location.reload();\n      history.goBack();\n    };\n\n    dialogBox({\n      msg,\n      cancelBtnText,\n      confirmBtnText,\n      cancelCb\n    });\n  } else {\n    //no chnages\n    setUpdates(null);\n  }\n};\nexport const saveChangesOnLeave = async (initilState, state, getState, http //api call\n) => {\n  try {\n    if (JSON.stringify(state) !== JSON.stringify(initilState)) {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      await axios.post(http, JSON.stringify(state), config);\n      await getState();\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/components/form/utils/handleUnsavedChanges.js"],"names":["axios","dialogBox","alertUnsavedChanges","initilState","state","setStateTab","setUpdates","history","JSON","stringify","block","location","action","msg","cancelBtnText","confirmBtnText","cancelCb","window","reload","goBack","saveChangesOnLeave","getState","http","config","headers","post","err","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,yBAA1B;AAEA,OAAO,MAAMC,mBAAmB,GAAG,OAC/BC,WAD+B,EAE/BC,KAF+B,EAG/BC,WAH+B,EAI/BC,UAJ+B,EAK/BC,OAL+B,KAM9B;AACD,MAAIC,IAAI,CAACC,SAAL,CAAeL,KAAf,MAA0BI,IAAI,CAACC,SAAL,CAAeN,WAAf,CAA9B,EAA2D;AACvD;AACAI,IAAAA,OAAO,CAACG,KAAR,CAAc,CAACC,QAAD,EAAWC,MAAX,KAAsB;AAChC;AACA;AAEA;AACA;AACA,aAAO,2CAAP;AACH,KAPD;AAQAP,IAAAA,WAAW,CAAC,MAAD,CAAX;AACA,UAAMQ,GAAG,GAAI,2DAAb;AACA,UAAMC,aAAa,GAAG,mBAAtB;AACA,UAAMC,cAAc,GAAG,qBAAvB;;AACA,UAAMC,QAAQ,GAAG,MAAM;AACnB;AACAC,MAAAA,MAAM,CAACN,QAAP,CAAgBO,MAAhB;AACAX,MAAAA,OAAO,CAACY,MAAR;AACH,KAJD;;AAMAlB,IAAAA,SAAS,CAAC;AACNY,MAAAA,GADM;AAENC,MAAAA,aAFM;AAGNC,MAAAA,cAHM;AAINC,MAAAA;AAJM,KAAD,CAAT;AAMH,GA1BD,MA0BO;AACH;AACAV,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH;AACJ,CArCM;AAuCP,OAAO,MAAMc,kBAAkB,GAAG,OAC9BjB,WAD8B,EAE9BC,KAF8B,EAG9BiB,QAH8B,EAI9BC,IAJ8B,CAIzB;AAJyB,KAK7B;AACD,MAAI;AACA,QAAId,IAAI,CAACC,SAAL,CAAeL,KAAf,MAA0BI,IAAI,CAACC,SAAL,CAAeN,WAAf,CAA9B,EAA2D;AACvD,YAAMoB,MAAM,GAAG;AACXC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX;AADE,OAAf;AAKA,YAAMxB,KAAK,CAACyB,IAAN,CAAWH,IAAX,EAAiBd,IAAI,CAACC,SAAL,CAAeL,KAAf,CAAjB,EAAwCmB,MAAxC,CAAN;AACA,YAAMF,QAAQ,EAAd;AACH;AACJ,GAVD,CAUE,OAAOK,GAAP,EAAY;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH;AACJ,CAnBM","sourcesContent":["import axios from 'axios';\nimport { dialogBox } from '../../alerts/alertsFuns';\n\nexport const alertUnsavedChanges = async (\n    initilState,\n    state,\n    setStateTab,\n    setUpdates,\n    history\n) => {\n    if (JSON.stringify(state) !== JSON.stringify(initilState)) {\n        // history.push('/dashboard/profile');\n        history.block((location, action) => {\n            // The location and action arguments indicate the location\n            // we're transitioning to and how we're getting there.\n\n            // A common use case is to prevent the user from leaving the\n            // page if there's a form they haven't submitted yet.\n            return 'Are you sure you want to leave this page?';\n        });\n        setStateTab('form');\n        const msg = `You have some unsaved changes. What would you like to do?`;\n        const cancelBtnText = 'Discharge changes';\n        const confirmBtnText = 'Return to the form!';\n        const cancelCb = () => {\n            //discharge all changes and clear app changes status\n            window.location.reload();\n            history.goBack();\n        };\n\n        dialogBox({\n            msg,\n            cancelBtnText,\n            confirmBtnText,\n            cancelCb,\n        });\n    } else {\n        //no chnages\n        setUpdates(null);\n    }\n};\n\nexport const saveChangesOnLeave = async (\n    initilState,\n    state,\n    getState,\n    http //api call\n) => {\n    try {\n        if (JSON.stringify(state) !== JSON.stringify(initilState)) {\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            };\n            await axios.post(http, JSON.stringify(state), config);\n            await getState();\n        }\n    } catch (err) {\n        console.log(err);\n    }\n};\n"]},"metadata":{},"sourceType":"module"}