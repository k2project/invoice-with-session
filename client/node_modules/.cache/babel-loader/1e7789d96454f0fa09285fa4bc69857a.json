{"ast":null,"code":"\"use strict\";\n\nconst {\n  isValidTargetOrigin\n} = require(\"../utils\");\n\nconst DOMException = require(\"domexception\");\n\nmodule.exports = function (message, targetOrigin) {\n  if (arguments.length < 2) {\n    throw new TypeError(\"'postMessage' requires 2 arguments: 'message' and 'targetOrigin'\");\n  }\n\n  targetOrigin = String(targetOrigin);\n\n  if (!isValidTargetOrigin(targetOrigin)) {\n    throw new DOMException(\"Failed to execute 'postMessage' on 'Window': \" + \"Invalid target origin '\" + targetOrigin + \"' in a call to 'postMessage'.\", \"SyntaxError\");\n  } // TODO: targetOrigin === '/' - requires reference to source window\n  // See https://github.com/tmpvar/jsdom/pull/1140#issuecomment-111587499\n\n\n  if (targetOrigin !== \"*\" && targetOrigin !== this.location.origin) {\n    return;\n  } // TODO: event.source - requires reference to source window\n  // TODO: event.origin - requires reference to source window\n  // TODO: event.ports\n  // TODO: event.data - structured clone message - requires cloning DOM nodes\n\n\n  const event = new this.MessageEvent(\"message\", {\n    data: message\n  });\n  event.initEvent(\"message\", false, false);\n  setTimeout(() => {\n    this.dispatchEvent(event);\n  }, 0);\n};","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/node_modules/jsdom/lib/jsdom/living/post-message.js"],"names":["isValidTargetOrigin","require","DOMException","module","exports","message","targetOrigin","arguments","length","TypeError","String","location","origin","event","MessageEvent","data","initEvent","setTimeout","dispatchEvent"],"mappings":"AAAA;;AACA,MAAM;AAAEA,EAAAA;AAAF,IAA0BC,OAAO,CAAC,UAAD,CAAvC;;AACA,MAAMC,YAAY,GAAGD,OAAO,CAAC,cAAD,CAA5B;;AAEAE,MAAM,CAACC,OAAP,GAAiB,UAAUC,OAAV,EAAmBC,YAAnB,EAAiC;AAChD,MAAIC,SAAS,CAACC,MAAV,GAAmB,CAAvB,EAA0B;AACxB,UAAM,IAAIC,SAAJ,CAAc,kEAAd,CAAN;AACD;;AAEDH,EAAAA,YAAY,GAAGI,MAAM,CAACJ,YAAD,CAArB;;AAEA,MAAI,CAACN,mBAAmB,CAACM,YAAD,CAAxB,EAAwC;AACtC,UAAM,IAAIJ,YAAJ,CAAiB,kDACrB,yBADqB,GACOI,YADP,GACsB,+BADvC,EACwE,aADxE,CAAN;AAED,GAV+C,CAYhD;AACA;;;AACA,MAAIA,YAAY,KAAK,GAAjB,IAAwBA,YAAY,KAAK,KAAKK,QAAL,CAAcC,MAA3D,EAAmE;AACjE;AACD,GAhB+C,CAkBhD;AACA;AACA;AACA;;;AACA,QAAMC,KAAK,GAAG,IAAI,KAAKC,YAAT,CAAsB,SAAtB,EAAiC;AAC7CC,IAAAA,IAAI,EAAEV;AADuC,GAAjC,CAAd;AAIAQ,EAAAA,KAAK,CAACG,SAAN,CAAgB,SAAhB,EAA2B,KAA3B,EAAkC,KAAlC;AAEAC,EAAAA,UAAU,CAAC,MAAM;AACf,SAAKC,aAAL,CAAmBL,KAAnB;AACD,GAFS,EAEP,CAFO,CAAV;AAGD,CA/BD","sourcesContent":["\"use strict\";\nconst { isValidTargetOrigin } = require(\"../utils\");\nconst DOMException = require(\"domexception\");\n\nmodule.exports = function (message, targetOrigin) {\n  if (arguments.length < 2) {\n    throw new TypeError(\"'postMessage' requires 2 arguments: 'message' and 'targetOrigin'\");\n  }\n\n  targetOrigin = String(targetOrigin);\n\n  if (!isValidTargetOrigin(targetOrigin)) {\n    throw new DOMException(\"Failed to execute 'postMessage' on 'Window': \" +\n      \"Invalid target origin '\" + targetOrigin + \"' in a call to 'postMessage'.\", \"SyntaxError\");\n  }\n\n  // TODO: targetOrigin === '/' - requires reference to source window\n  // See https://github.com/tmpvar/jsdom/pull/1140#issuecomment-111587499\n  if (targetOrigin !== \"*\" && targetOrigin !== this.location.origin) {\n    return;\n  }\n\n  // TODO: event.source - requires reference to source window\n  // TODO: event.origin - requires reference to source window\n  // TODO: event.ports\n  // TODO: event.data - structured clone message - requires cloning DOM nodes\n  const event = new this.MessageEvent(\"message\", {\n    data: message\n  });\n\n  event.initEvent(\"message\", false, false);\n\n  setTimeout(() => {\n    this.dispatchEvent(event);\n  }, 0);\n};\n"]},"metadata":{},"sourceType":"script"}