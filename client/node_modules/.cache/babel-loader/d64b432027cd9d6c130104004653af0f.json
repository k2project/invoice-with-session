{"ast":null,"code":"var _jsxFileName = \"/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/register/Register.js\";\nimport axios from 'axios';\nimport React, { useState, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAlert } from '../../redux/actions/messages';\nimport Logo from '../../components/logo/Logo';\nimport FormInput from '../../components/form/components/FormInput';\nimport FormErrorsDisplay from '../../components/form/components/FormErrorsDisplay';\nimport { formErrorsStyling } from '../../components/form/utils/formFuns';\n\nconst Register = ({\n  setAlert,\n  endSession\n}) => {\n  const handleCancelataion = () => {\n    const inputs = document.querySelectorAll('.delete-account-form input');\n    Array.from(inputs).forEach(input => {\n      input.classList.remove('form__input--err');\n      input.removeAttribute('aria-label');\n    });\n    setFormData(initState);\n  };\n\n  const deleteAccount = async e => {\n    e.preventDefault();\n    const {\n      password\n    } = formData;\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      const body = JSON.stringify({\n        password\n      });\n      await axios.post('/api/user/unregister', body, config);\n      endSession();\n      setAlert('Your account has been deleted successfully. We are sorry to see you going...', 'success', 'sign up page', false);\n      setFormData(initState);\n    } catch (err) {\n      setFormData({ ...formData,\n        errors: err.response.data.errors\n      });\n    }\n  };\n\n  const initState = {\n    email: '',\n    password: '',\n    password2: '',\n    errors: []\n  };\n  const [formData, setFormData] = useState(initState);\n  useEffect(() => {\n    formErrorsStyling(formData.errors);\n  }, [formData.errors]);\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"delete-account account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, \"Delete your account.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, \"WARRNING!\"), \" Once you delete your account, there is no going back. Please be certain.\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"tile delete-account-form\",\n    onSubmit: deleteAccount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    type: \"email\",\n    name: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, \"Enter your email.\"), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    type: \"password\",\n    name: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, \"Enter your password.\"), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    type: \"password\",\n    name: \"password2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \"Confirm the password.\"), formData.errors.length > 0 && /*#__PURE__*/React.createElement(FormErrorsDisplay, {\n    errors: formData.errors,\n    label: \"Register form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onMouseDown: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, \"Create account\")));\n};\n\nRegister.propTypes = {\n  setAlert: PropTypes.func\n};\n\nconst mapStateToProps = state => ({});\n\nconst mapDispatchToProps = {\n  setAlert\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/register/Register.js"],"names":["axios","React","useState","Fragment","PropTypes","Redirect","Link","connect","setAlert","Logo","FormInput","FormErrorsDisplay","formErrorsStyling","Register","endSession","handleCancelataion","inputs","document","querySelectorAll","Array","from","forEach","input","classList","remove","removeAttribute","setFormData","initState","deleteAccount","e","preventDefault","password","formData","config","headers","body","JSON","stringify","post","err","errors","response","data","email","password2","useEffect","length","propTypes","func","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useState, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAlert } from '../../redux/actions/messages';\nimport Logo from '../../components/logo/Logo';\nimport FormInput from '../../components/form/components/FormInput';\nimport FormErrorsDisplay from '../../components/form/components/FormErrorsDisplay';\nimport { formErrorsStyling } from '../../components/form/utils/formFuns';\n\nconst Register = ({ setAlert, endSession }) => {\n    const handleCancelataion = () => {\n        const inputs = document.querySelectorAll('.delete-account-form input');\n        Array.from(inputs).forEach((input) => {\n            input.classList.remove('form__input--err');\n            input.removeAttribute('aria-label');\n        });\n        setFormData(initState);\n    };\n    const deleteAccount = async (e) => {\n        e.preventDefault();\n        const { password } = formData;\n        try {\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            };\n\n            const body = JSON.stringify({ password });\n            await axios.post('/api/user/unregister', body, config);\n            endSession();\n            setAlert(\n                'Your account has been deleted successfully. We are sorry to see you going...',\n                'success',\n                'sign up page',\n                false\n            );\n            setFormData(initState);\n        } catch (err) {\n            setFormData({\n                ...formData,\n                errors: err.response.data.errors,\n            });\n        }\n    };\n    const initState = {\n        email: '',\n        password: '',\n        password2: '',\n        errors: [],\n    };\n    const [formData, setFormData] = useState(initState);\n    useEffect(() => {\n        formErrorsStyling(formData.errors);\n    }, [formData.errors]);\n    return (\n        <section className='delete-account account'>\n            <h2>Delete your account.</h2>\n            <p>\n                <b>WARRNING!</b> Once you delete your account, there is no going\n                back. Please be certain.\n            </p>\n            <form className='tile delete-account-form' onSubmit={deleteAccount}>\n                <FormInput\n                    form={{ formData, setFormData }}\n                    type='email'\n                    name='email'\n                >\n                    Enter your email.\n                </FormInput>\n                <FormInput\n                    form={{ formData, setFormData }}\n                    type='password'\n                    name='password'\n                >\n                    Enter your password.\n                </FormInput>\n                <FormInput\n                    form={{ formData, setFormData }}\n                    type='password'\n                    name='password2'\n                >\n                    Confirm the password.\n                </FormInput>\n                {formData.errors.length > 0 && (\n                    <FormErrorsDisplay\n                        errors={formData.errors}\n                        label='Register form'\n                    />\n                )}\n                <button className='btn' onMouseDown={(e) => e.preventDefault()}>\n                    Create account\n                </button>\n            </form>\n        </section>\n    );\n};\n\nRegister.propTypes = {\n    setAlert: PropTypes.func,\n};\nconst mapStateToProps = (state) => ({});\nconst mapDispatchToProps = {\n    setAlert,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);\n"]},"metadata":{},"sourceType":"module"}