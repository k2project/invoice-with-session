{"ast":null,"code":"var _jsxFileName = \"/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/register/Register.js\";\nimport axios from 'axios';\nimport React, { useState, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAlert } from '../../redux/actions/alerts';\nimport { registerUser } from '../../redux/actions/user';\nimport Logo from '../../components/logo/Logo';\nimport FormErrorsDisplay from '../../components/forms/FormErrorsDisplay';\nimport { inputOnChange, updateStateErrors } from '../../components/forms/formFuns';\nimport './Register.scss';\n\nconst Register = ({\n  redirectLink,\n  isRegistered,\n  isAuthenticated,\n  setAlert,\n  registerUser\n}) => {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    password2: '',\n    errors: []\n  });\n\n  const onChange = e => {\n    inputOnChange(e, formData, setFormData);\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    const form = e.target;\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      const body = JSON.stringify(formData);\n      await axios.post('/api/register', body, config); //registered successefully\n\n      setAlert('Account hass been created successfully. Please sign in. ', 'success', 'login page', false);\n      registerUser();\n    } catch (err) {\n      console.log('REGISTER FORM ERR:', err);\n      if (err.response) updateStateErrors(form, formData, setFormData, err.response.data.errors);\n    }\n  };\n\n  if (isRegistered) return /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 30\n    }\n  });\n  if (isAuthenticated) return /*#__PURE__*/React.createElement(Redirect, {\n    to: redirectLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 33\n    }\n  });\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, !isAuthenticated && !sessionStorage.token && /*#__PURE__*/React.createElement(\"main\", {\n    className: \"register\",\n    id: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"register__form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, \"Register Your Account\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"p--lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, ' ', \"Creating your account with us is free and super swift.\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"email\",\n    name: \"email\",\n    onChange: onChange,\n    className: \"form__input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    onChange: onChange,\n    className: \"form__input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password2\",\n    name: \"password2\",\n    onChange: onChange,\n    className: \"form__input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }), formData.errors.length > 0 && /*#__PURE__*/React.createElement(FormErrorsDisplay, {\n    errors: formData.errors,\n    label: \"register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn--form btn--theme\",\n    onMouseDown: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, \"Create Account\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, \"Already have an account?\", ' ', /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, \"Sign in.\")))));\n};\n\nRegister.propTypes = {\n  setAlert: PropTypes.func.isRequired,\n  isAuthenticated: PropTypes.bool.isRequired\n};\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.user.isAuthenticated,\n  isRegistered: state.user.isRegistered,\n  redirectLink: state.global.redirectLink\n});\n\nexport default connect(mapStateToProps, {\n  setAlert,\n  registerUser\n})(Register);","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/register/Register.js"],"names":["axios","React","useState","Fragment","PropTypes","Redirect","Link","connect","setAlert","registerUser","Logo","FormErrorsDisplay","inputOnChange","updateStateErrors","Register","redirectLink","isRegistered","isAuthenticated","formData","setFormData","email","password","password2","errors","onChange","e","onSubmit","preventDefault","form","target","config","headers","body","JSON","stringify","post","err","console","log","response","data","sessionStorage","token","length","propTypes","func","isRequired","bool","mapStateToProps","state","user","global"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useState, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAlert } from '../../redux/actions/alerts';\nimport { registerUser } from '../../redux/actions/user';\nimport Logo from '../../components/logo/Logo';\nimport FormErrorsDisplay from '../../components/forms/FormErrorsDisplay';\nimport {\n    inputOnChange,\n    updateStateErrors,\n} from '../../components/forms/formFuns';\nimport './Register.scss';\n\nconst Register = ({\n    redirectLink,\n    isRegistered,\n    isAuthenticated,\n    setAlert,\n    registerUser,\n}) => {\n    const [formData, setFormData] = useState({\n        email: '',\n        password: '',\n        password2: '',\n        errors: [],\n    });\n\n    const onChange = (e) => {\n        inputOnChange(e, formData, setFormData);\n    };\n\n    const onSubmit = async (e) => {\n        e.preventDefault();\n        const form = e.target;\n        try {\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            };\n\n            const body = JSON.stringify(formData);\n            await axios.post('/api/register', body, config);\n            //registered successefully\n            setAlert(\n                'Account hass been created successfully. Please sign in. ',\n                'success',\n                'login page',\n                false\n            );\n            registerUser();\n        } catch (err) {\n            console.log('REGISTER FORM ERR:', err);\n            if (err.response)\n                updateStateErrors(\n                    form,\n                    formData,\n                    setFormData,\n                    err.response.data.errors\n                );\n        }\n    };\n\n    if (isRegistered) return <Redirect to='/' />;\n    if (isAuthenticated) return <Redirect to={redirectLink} />;\n\n    return (\n        <Fragment>\n            {!isAuthenticated && !sessionStorage.token && (\n                <main className='register' id='main'>\n                    <section className='register__form'>\n                        <Logo />\n                        <h1 className='sr-only'>Register Your Account</h1>\n                        <p className='p--lg'>\n                            {' '}\n                            Creating your account with us is free and super\n                            swift.\n                        </p>\n\n                        <form onSubmit={onSubmit}>\n                            <label htmlFor='email'>Email</label>\n                            <input\n                                type='text'\n                                id='email'\n                                name='email'\n                                onChange={onChange}\n                                className='form__input'\n                            />\n                            <label htmlFor='password'>Password</label>\n                            <input\n                                type='password'\n                                id='password'\n                                name='password'\n                                onChange={onChange}\n                                className='form__input'\n                            />\n                            <label htmlFor='password2'>Confirm Password</label>\n                            <input\n                                type='password'\n                                id='password2'\n                                name='password2'\n                                onChange={onChange}\n                                className='form__input'\n                            />\n                            {formData.errors.length > 0 && (\n                                <FormErrorsDisplay\n                                    errors={formData.errors}\n                                    label='register'\n                                />\n                            )}\n\n                            <button\n                                type='submit'\n                                className='btn btn--form btn--theme'\n                                onMouseDown={(e) => e.preventDefault()}\n                            >\n                                Create Account\n                            </button>\n                        </form>\n                        <p>\n                            Already have an account?{' '}\n                            <Link to='/'>Sign in.</Link>\n                        </p>\n                    </section>\n                </main>\n            )}\n        </Fragment>\n    );\n};\nRegister.propTypes = {\n    setAlert: PropTypes.func.isRequired,\n    isAuthenticated: PropTypes.bool.isRequired,\n};\nconst mapStateToProps = (state) => ({\n    isAuthenticated: state.user.isAuthenticated,\n    isRegistered: state.user.isRegistered,\n    redirectLink: state.global.redirectLink,\n});\nexport default connect(mapStateToProps, { setAlert, registerUser })(Register);\n"]},"metadata":{},"sourceType":"module"}