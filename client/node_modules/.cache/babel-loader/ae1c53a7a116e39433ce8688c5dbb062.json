{"ast":null,"code":"var _jsxFileName = \"/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/login/Login.js\";\nimport React, { useEffect, useState } from 'react';\nimport './Login.scss';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { startSession } from '../../redux/actions/session';\nimport Logo from '../../components/logo/Logo';\nimport FormInput from '../../components/form/components/FormInput';\nimport FormErrorsDisplay from '../../components/form/components/FormErrorsDisplay';\nimport { formErrorsStyling } from '../../components/form/utils/formFuns';\n\nconst Login = ({\n  startSession\n}) => {\n  const onSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      const {\n        email,\n        password\n      } = formData;\n      const body = JSON.stringify({\n        email,\n        password\n      });\n      const res = await axios.post('/api/user/login', body, config);\n      startSession(res.data);\n      setAlert('Login successful. ', 'success', 'dashboard');\n    } catch (err) {\n      console.log('LOGIN FORM ERR:', err);\n      setFormData({ ...formData,\n        errors: err.response.data.errors\n      });\n    }\n  };\n\n  const initState = {\n    email: '',\n    password: '',\n    errors: []\n  };\n  const [formData, setFormData] = useState(initState);\n  useEffect(() => {\n    formErrorsStyling(formData.errors);\n  }, [formData.errors]);\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"login\",\n    id: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"login__bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cover cover--theme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"login__form\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    type: \"email\",\n    name: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    type: \"password\",\n    name: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn--form btn--theme\",\n    onMouseDown: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, \"Log in\")), formData.errors.length > 0 && /*#__PURE__*/React.createElement(FormErrorsDisplay, {\n    errors: formData.errors,\n    label: \"Register form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, \"Need an account?\", ' ', /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    className: \"link--themed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \"Sign up\"), ' ', \"now.\")));\n};\n\nconst mapStateToProps = state => ({});\n\nconst mapDispatchToProps = {\n  startSession\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/login/Login.js"],"names":["React","useEffect","useState","Link","axios","connect","startSession","Logo","FormInput","FormErrorsDisplay","formErrorsStyling","Login","onSubmit","e","preventDefault","config","headers","email","password","formData","body","JSON","stringify","res","post","data","setAlert","err","console","log","setFormData","errors","response","initState","length","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './Login.scss';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { startSession } from '../../redux/actions/session';\nimport Logo from '../../components/logo/Logo';\nimport FormInput from '../../components/form/components/FormInput';\nimport FormErrorsDisplay from '../../components/form/components/FormErrorsDisplay';\nimport { formErrorsStyling } from '../../components/form/utils/formFuns';\n\nconst Login = ({ startSession }) => {\n    const onSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            };\n            const { email, password } = formData;\n            const body = JSON.stringify({\n                email,\n                password,\n            });\n            const res = await axios.post('/api/user/login', body, config);\n            startSession(res.data);\n            setAlert('Login successful. ', 'success', 'dashboard');\n        } catch (err) {\n            console.log('LOGIN FORM ERR:', err);\n            setFormData({\n                ...formData,\n                errors: err.response.data.errors,\n            });\n        }\n    };\n    const initState = {\n        email: '',\n        password: '',\n        errors: [],\n    };\n    const [formData, setFormData] = useState(initState);\n    useEffect(() => {\n        formErrorsStyling(formData.errors);\n    }, [formData.errors]);\n    return (\n        <main className='login' id='main'>\n            <section className='login__bg'>\n                <div className='cover cover--theme'>\n                    <Logo />\n                </div>\n            </section>\n            <section>\n                <h1 className='sr-only'>Login</h1>\n                <form className='login__form' onSubmit={onSubmit}>\n                    <FormInput\n                        form={{ formData, setFormData }}\n                        type='email'\n                        name='email'\n                    >\n                        Email\n                    </FormInput>\n                    <FormInput\n                        form={{ formData, setFormData }}\n                        type='password'\n                        name='password'\n                    >\n                        Password\n                    </FormInput>\n\n                    <button\n                        className='btn btn--form btn--theme'\n                        onMouseDown={(e) => e.preventDefault()}\n                    >\n                        Log in\n                    </button>\n                </form>\n                {formData.errors.length > 0 && (\n                    <FormErrorsDisplay\n                        errors={formData.errors}\n                        label='Register form'\n                    />\n                )}\n                <p>\n                    Need an account?{' '}\n                    <Link to='/register' className='link--themed'>\n                        Sign up\n                    </Link>{' '}\n                    now.\n                </p>\n            </section>\n        </main>\n    );\n};\nconst mapStateToProps = (state) => ({});\nconst mapDispatchToProps = { startSession };\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}