{"ast":null,"code":"var _jsxFileName = \"/Users/krispol/Desktop/invoice/invoice-with-session/client/src/components/form/forms/TaskForm.js\";\nimport React, { useState, useEffect, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { v4 as uuidv4 } from 'uuid';\nimport FormInput from '../components/FormInput';\nimport FormErrorsDisplay from '../components/FormErrorsDisplay';\nimport { formErrorsStyling } from '../utils/formFuns';\nimport { connect } from 'react-redux';\nimport { getAllTasks } from '../../../redux/actions/companies';\nexport const TaskForm = ({\n  companyID,\n  update\n}) => {\n  const [formData, setFormData] = useState({\n    description: '',\n    qty: '',\n    rate: '',\n    amount: '',\n    errors: []\n  });\n\n  const handleAdd = async e => {\n    e.preventDefault();\n    const {\n      description,\n      qty,\n      rate,\n      amount\n    } = formData;\n    const errors = [];\n\n    if (!description.trim()) {\n      const error = {\n        param: 'description',\n        msg: 'Please describe the task.'\n      };\n      errors.push(error);\n    }\n\n    if (errors.length > 0) {\n      setFormData({ ...formData,\n        errors\n      });\n      return;\n    }\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }; //create task\n\n      const task = {\n        _id: uuidv4(),\n        description,\n        qty: 'N/A' || qty,\n        rate: 'N/A' || rate,\n        amount: 'N/A' || amount,\n        addToInvoice: true,\n        createdAt: new Date()\n      };\n      let body = {\n        task\n      };\n      if (update) body.update = update;\n      body = JSON.stringify(body);\n      console.log(companyID);\n      const res = await axios.post(`/api/companies/tasks/${companyID}`, body, config); //get all tasks\n\n      getAllTasks(companyID); //reset state\n\n      setFormData({\n        description: '',\n        qty: '',\n        rate: '',\n        amount: '',\n        errors: []\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    formErrorsStyling(formData.errors);\n  }, [formData.errors]);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    className: \"add-task\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, \"Add a new task.\")), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    name: \"description\",\n    size: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, \"Description*\"), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    name: \"qty\",\n    size: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, \"Qty\"), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    name: \"rate\",\n    size: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"Rate\"), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    name: \"amount\",\n    size: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, \"Amount\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn--grey\",\n    onMouseDown: e => e.preventDefault(),\n    onClick: handleAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \"Add Item\")), formData.errors.length > 0 && /*#__PURE__*/React.createElement(FormErrorsDisplay, {\n    errors: formData.errors,\n    label: \"Add custom field form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }));\n};\nTaskForm.propTypes = {\n  getAllTasks: PropTypes.func\n};\n\nconst mapStateToProps = state => ({});\n\nconst mapDispatchToProps = {\n  getAllTasks\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskForm);","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/components/form/forms/TaskForm.js"],"names":["React","useState","useEffect","Fragment","PropTypes","axios","v4","uuidv4","FormInput","FormErrorsDisplay","formErrorsStyling","connect","getAllTasks","TaskForm","companyID","update","formData","setFormData","description","qty","rate","amount","errors","handleAdd","e","preventDefault","trim","error","param","msg","push","length","config","headers","task","_id","addToInvoice","createdAt","Date","body","JSON","stringify","console","log","res","post","err","propTypes","func","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { v4 as uuidv4 } from 'uuid';\nimport FormInput from '../components/FormInput';\nimport FormErrorsDisplay from '../components/FormErrorsDisplay';\nimport { formErrorsStyling } from '../utils/formFuns';\nimport { connect } from 'react-redux';\nimport { getAllTasks } from '../../../redux/actions/companies';\n\nexport const TaskForm = ({ companyID, update }) => {\n    const [formData, setFormData] = useState({\n        description: '',\n        qty: '',\n        rate: '',\n        amount: '',\n        errors: [],\n    });\n    const handleAdd = async (e) => {\n        e.preventDefault();\n        const { description, qty, rate, amount } = formData;\n        const errors = [];\n        if (!description.trim()) {\n            const error = {\n                param: 'description',\n                msg: 'Please describe the task.',\n            };\n            errors.push(error);\n        }\n        if (errors.length > 0) {\n            setFormData({\n                ...formData,\n                errors,\n            });\n            return;\n        }\n\n        try {\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            };\n            //create task\n            const task = {\n                _id: uuidv4(),\n                description,\n                qty: 'N/A' || qty,\n                rate: 'N/A' || rate,\n                amount: 'N/A' || amount,\n                addToInvoice: true,\n                createdAt: new Date(),\n            };\n            let body = { task };\n            if (update) body.update = update;\n            body = JSON.stringify(body);\n            console.log(companyID);\n            const res = await axios.post(\n                `/api/companies/tasks/${companyID}`,\n                body,\n                config\n            );\n            //get all tasks\n            getAllTasks(companyID);\n            //reset state\n            setFormData({\n                description: '',\n                qty: '',\n                rate: '',\n                amount: '',\n                errors: [],\n            });\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    useEffect(() => {\n        formErrorsStyling(formData.errors);\n    }, [formData.errors]);\n    return (\n        <Fragment>\n            <fieldset className='add-task'>\n                <legend>\n                    <b>Add a new task.</b>\n                </legend>\n                <FormInput\n                    form={{ formData, setFormData }}\n                    name='description'\n                    size='auto'\n                >\n                    Description*\n                </FormInput>\n                <FormInput\n                    form={{ formData, setFormData }}\n                    name='qty'\n                    size='auto'\n                >\n                    Qty\n                </FormInput>\n\n                <FormInput\n                    form={{ formData, setFormData }}\n                    name='rate'\n                    size='auto'\n                >\n                    Rate\n                </FormInput>\n                <FormInput\n                    form={{ formData, setFormData }}\n                    name='amount'\n                    size='auto'\n                >\n                    Amount\n                </FormInput>\n\n                <button\n                    className='btn btn--grey'\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={handleAdd}\n                >\n                    Add Item\n                </button>\n            </fieldset>\n            {formData.errors.length > 0 && (\n                <FormErrorsDisplay\n                    errors={formData.errors}\n                    label='Add custom field form'\n                />\n            )}\n        </Fragment>\n    );\n};\n\nTaskForm.propTypes = {\n    getAllTasks: PropTypes.func,\n};\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = {\n    getAllTasks,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskForm);\n"]},"metadata":{},"sourceType":"module"}