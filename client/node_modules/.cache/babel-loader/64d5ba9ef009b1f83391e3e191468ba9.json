{"ast":null,"code":"var _jsxFileName = \"/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/profile/ProfileUpdate.js\";\nimport React, { useEffect, Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport './Profile.scss';\nimport Page from '../../components/page/Page';\nimport ProfileSubmenu from './ProfileSubmenu';\nimport CustomBuiltForm from '../../components/form/forms/CustomBuiltForm';\nimport { connect } from 'react-redux';\nimport { getProfile } from '../../redux/actions/profile';\nimport { setProfileTab } from '../../redux/actions/session';\nimport { setUpdates } from '../../redux/actions/updates';\nimport { alertUnsavedChanges } from '../../components/form/utils/handleUnsavedChanges';\n\nclass ProfileUpdate extends Component {\n  constructor(props) {\n    super(props); // this.state = {\n    //     //deep copy of the redux state on component load\n    //     details:\n    //         this.props.updated ||\n    //         JSON.parse(JSON.stringify(props.profile.details)),\n    // };\n\n    this.handleChanges = this.handleChanges.bind(this);\n    this.updateInitStateToReduxState = this.updateInitStateToReduxState.bind(this);\n  }\n\n  handleChanges() {\n    alertUnsavedChanges(this.props.initialState, //initial state\n    this.props.profile.details, //redux updated state\n    this.props.setProfileTab, this.props.setUpdates, this.props.history);\n  }\n\n  updateInitStateToReduxState() {\n    this.props.setUpdates(false);\n    this.setState({\n      details: this.props.profile.details\n    });\n  }\n\n  componentDidMount() {\n    if (this.props.initialState === null) this.props.setUpdates(JSON.parse(JSON.stringify(this.props.profile.details)));\n    window.addEventListener('beforeunload', () => this.props.setUpdates(null));\n  }\n\n  componentWillUnmount() {\n    console.log('Unmoutning');\n    this.handleChanges();\n    window.removeEventListener('beforeunload', () => this.props.setUpdates(null));\n  }\n\n  render() {\n    const formData = {\n      details: this.props.profile.details,\n      http: '/api/profile',\n      url: '/dashboard/profile',\n      cb: this.props.getProfile,\n      updateInitStateToReduxState: this.updateInitStateToReduxState,\n      //stops firing alertUnsavedChanges on submit\n      msg: 'Your profile has been updated successfully.'\n    };\n    return /*#__PURE__*/React.createElement(Page, {\n      title: \"Profile Page.\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ProfileSubmenu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }), \"}\", /*#__PURE__*/React.createElement(CustomBuiltForm, {\n      data: formData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }), \";\");\n  }\n\n}\n\nProfileUpdate.propTypes = {\n  details: PropTypes.array,\n  getProfile: PropTypes.func,\n  setAlert: PropTypes.func,\n  setProfileTab: PropTypes.func,\n  setUpdates: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  profile: state.profile,\n  initialState: state.updates.initialState\n});\n\nconst mapDispatchToProps = {\n  getProfile,\n  setProfileTab,\n  setUpdates\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(ProfileUpdate));","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/profile/ProfileUpdate.js"],"names":["React","useEffect","Component","withRouter","PropTypes","Page","ProfileSubmenu","CustomBuiltForm","connect","getProfile","setProfileTab","setUpdates","alertUnsavedChanges","ProfileUpdate","constructor","props","handleChanges","bind","updateInitStateToReduxState","initialState","profile","details","history","setState","componentDidMount","JSON","parse","stringify","window","addEventListener","componentWillUnmount","console","log","removeEventListener","render","formData","http","url","cb","msg","propTypes","array","func","setAlert","mapStateToProps","state","updates","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport './Profile.scss';\nimport Page from '../../components/page/Page';\nimport ProfileSubmenu from './ProfileSubmenu';\nimport CustomBuiltForm from '../../components/form/forms/CustomBuiltForm';\nimport { connect } from 'react-redux';\nimport { getProfile } from '../../redux/actions/profile';\nimport { setProfileTab } from '../../redux/actions/session';\nimport { setUpdates } from '../../redux/actions/updates';\nimport { alertUnsavedChanges } from '../../components/form/utils/handleUnsavedChanges';\n\nclass ProfileUpdate extends Component {\n    constructor(props) {\n        super(props);\n        // this.state = {\n        //     //deep copy of the redux state on component load\n        //     details:\n        //         this.props.updated ||\n        //         JSON.parse(JSON.stringify(props.profile.details)),\n        // };\n        this.handleChanges = this.handleChanges.bind(this);\n        this.updateInitStateToReduxState = this.updateInitStateToReduxState.bind(\n            this\n        );\n    }\n    handleChanges() {\n        alertUnsavedChanges(\n            this.props.initialState, //initial state\n            this.props.profile.details, //redux updated state\n            this.props.setProfileTab,\n            this.props.setUpdates,\n            this.props.history\n        );\n    }\n    updateInitStateToReduxState() {\n        this.props.setUpdates(false);\n        this.setState({ details: this.props.profile.details });\n    }\n    componentDidMount() {\n        if (this.props.initialState === null)\n            this.props.setUpdates(\n                JSON.parse(JSON.stringify(this.props.profile.details))\n            );\n        window.addEventListener('beforeunload', () =>\n            this.props.setUpdates(null)\n        );\n    }\n    componentWillUnmount() {\n        console.log('Unmoutning');\n\n        this.handleChanges();\n        window.removeEventListener('beforeunload', () =>\n            this.props.setUpdates(null)\n        );\n    }\n    render() {\n        const formData = {\n            details: this.props.profile.details,\n            http: '/api/profile',\n            url: '/dashboard/profile',\n            cb: this.props.getProfile,\n            updateInitStateToReduxState: this.updateInitStateToReduxState, //stops firing alertUnsavedChanges on submit\n            msg: 'Your profile has been updated successfully.',\n        };\n        return (\n            <Page title='Profile Page.'>\n                <ProfileSubmenu />}\n                <CustomBuiltForm data={formData} />;\n            </Page>\n        );\n    }\n}\n\nProfileUpdate.propTypes = {\n    details: PropTypes.array,\n    getProfile: PropTypes.func,\n    setAlert: PropTypes.func,\n    setProfileTab: PropTypes.func,\n    setUpdates: PropTypes.func,\n};\nconst mapStateToProps = (state) => ({\n    profile: state.profile,\n    initialState: state.updates.initialState,\n});\nconst mapDispatchToProps = {\n    getProfile,\n    setProfileTab,\n    setUpdates,\n};\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(withRouter(ProfileUpdate));\n"]},"metadata":{},"sourceType":"module"}