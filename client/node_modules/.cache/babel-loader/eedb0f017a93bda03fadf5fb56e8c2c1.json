{"ast":null,"code":"import axios from 'axios';\nimport { dialogBox } from '../../alerts/alertsFuns';\nexport const alertUnsavedChanges = async (initilState, state, setStateTab, setSessionUpdatesStatus, url, //redirection back to the form\nhistory) => {\n  try {\n    if (JSON.stringify(state) !== JSON.stringify(initilState)) {\n      //register app chnages\n      setSessionUpdatesStatus(true);\n      const msg = `You have some unsaved changes. What would you like to do?`;\n      const cancelBtnText = 'Discharge updates';\n      const confirmBtnText = 'Return to the form!';\n\n      const cancelCb = () => {\n        //discharge all changes and clear app changes status\n        setSessionUpdatesStatus(false);\n        window.location.reload();\n      };\n\n      const confirmCb = () => {\n        history.push(url);\n        setStateTab('form');\n      };\n\n      dialogBox({\n        msg,\n        cancelBtnText,\n        confirmBtnText,\n        cancelCb,\n        confirmCb\n      });\n      return;\n    }\n\n    setSessionUpdatesStatus(false);\n  } catch (err) {\n    console.log(err); // setAlert(\n    //     `We think you may have some unsaved changes. Unfortunately due to server error we weren't able to proceed them.`,\n    //     'danger',\n    //     null,\n    //     false,\n    //     15000\n    // );\n  }\n};\nexport const saveChangesOnLeave = async (initilState, state, getState, http //api call\n) => {\n  try {\n    if (JSON.stringify(state) !== JSON.stringify(initilState)) {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      await axios.post(http, JSON.stringify(state), config);\n      await getState();\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/components/form/utils/handleUnsavedChanges.js"],"names":["axios","dialogBox","alertUnsavedChanges","initilState","state","setStateTab","setSessionUpdatesStatus","url","history","JSON","stringify","msg","cancelBtnText","confirmBtnText","cancelCb","window","location","reload","confirmCb","push","err","console","log","saveChangesOnLeave","getState","http","config","headers","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,yBAA1B;AAEA,OAAO,MAAMC,mBAAmB,GAAG,OAC/BC,WAD+B,EAE/BC,KAF+B,EAG/BC,WAH+B,EAI/BC,uBAJ+B,EAK/BC,GAL+B,EAK1B;AACLC,OAN+B,KAO9B;AACD,MAAI;AACA,QAAIC,IAAI,CAACC,SAAL,CAAeN,KAAf,MAA0BK,IAAI,CAACC,SAAL,CAAeP,WAAf,CAA9B,EAA2D;AACvD;AACAG,MAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACA,YAAMK,GAAG,GAAI,2DAAb;AACA,YAAMC,aAAa,GAAG,mBAAtB;AACA,YAAMC,cAAc,GAAG,qBAAvB;;AACA,YAAMC,QAAQ,GAAG,MAAM;AACnB;AACAR,QAAAA,uBAAuB,CAAC,KAAD,CAAvB;AACAS,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,OAJD;;AAKA,YAAMC,SAAS,GAAG,MAAM;AACpBV,QAAAA,OAAO,CAACW,IAAR,CAAaZ,GAAb;AACAF,QAAAA,WAAW,CAAC,MAAD,CAAX;AACH,OAHD;;AAIAJ,MAAAA,SAAS,CAAC;AACNU,QAAAA,GADM;AAENC,QAAAA,aAFM;AAGNC,QAAAA,cAHM;AAINC,QAAAA,QAJM;AAKNI,QAAAA;AALM,OAAD,CAAT;AAOA;AACH;;AAEDZ,IAAAA,uBAAuB,CAAC,KAAD,CAAvB;AACH,GA3BD,CA2BE,OAAOc,GAAP,EAAY;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EADU,CAEV;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ,CA7CM;AA+CP,OAAO,MAAMG,kBAAkB,GAAG,OAC9BpB,WAD8B,EAE9BC,KAF8B,EAG9BoB,QAH8B,EAI9BC,IAJ8B,CAIzB;AAJyB,KAK7B;AACD,MAAI;AACA,QAAIhB,IAAI,CAACC,SAAL,CAAeN,KAAf,MAA0BK,IAAI,CAACC,SAAL,CAAeP,WAAf,CAA9B,EAA2D;AACvD,YAAMuB,MAAM,GAAG;AACXC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX;AADE,OAAf;AAKA,YAAM3B,KAAK,CAAC4B,IAAN,CAAWH,IAAX,EAAiBhB,IAAI,CAACC,SAAL,CAAeN,KAAf,CAAjB,EAAwCsB,MAAxC,CAAN;AACA,YAAMF,QAAQ,EAAd;AACH;AACJ,GAVD,CAUE,OAAOJ,GAAP,EAAY;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH;AACJ,CAnBM","sourcesContent":["import axios from 'axios';\nimport { dialogBox } from '../../alerts/alertsFuns';\n\nexport const alertUnsavedChanges = async (\n    initilState,\n    state,\n    setStateTab,\n    setSessionUpdatesStatus,\n    url, //redirection back to the form\n    history\n) => {\n    try {\n        if (JSON.stringify(state) !== JSON.stringify(initilState)) {\n            //register app chnages\n            setSessionUpdatesStatus(true);\n            const msg = `You have some unsaved changes. What would you like to do?`;\n            const cancelBtnText = 'Discharge updates';\n            const confirmBtnText = 'Return to the form!';\n            const cancelCb = () => {\n                //discharge all changes and clear app changes status\n                setSessionUpdatesStatus(false);\n                window.location.reload();\n            };\n            const confirmCb = () => {\n                history.push(url);\n                setStateTab('form');\n            };\n            dialogBox({\n                msg,\n                cancelBtnText,\n                confirmBtnText,\n                cancelCb,\n                confirmCb,\n            });\n            return;\n        }\n\n        setSessionUpdatesStatus(false);\n    } catch (err) {\n        console.log(err);\n        // setAlert(\n        //     `We think you may have some unsaved changes. Unfortunately due to server error we weren't able to proceed them.`,\n        //     'danger',\n        //     null,\n        //     false,\n        //     15000\n        // );\n    }\n};\n\nexport const saveChangesOnLeave = async (\n    initilState,\n    state,\n    getState,\n    http //api call\n) => {\n    try {\n        if (JSON.stringify(state) !== JSON.stringify(initilState)) {\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            };\n            await axios.post(http, JSON.stringify(state), config);\n            await getState();\n        }\n    } catch (err) {\n        console.log(err);\n    }\n};\n"]},"metadata":{},"sourceType":"module"}