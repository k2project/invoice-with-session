{"ast":null,"code":"import axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { dialogBox } from '../../alerts/alertsFuns';\nimport { useEffect } from 'react';\nexport const alertUnsavedChanges = async (useEffect, state, getState, setStateTab, http, //api call\nurl, //redirection back to the form\nhistory, setAlert) => {\n  useEffect(() => {\n    return async () => {\n      try {\n        const stateDB = await axios.get(http);\n\n        if (JSON.stringify(state.details) !== JSON.stringify(stateDB.data.details)) {\n          const msg = `You have some unsaved changes. What would you like to do?`;\n          const cancelBtnText = 'Discharge updates';\n          const confirmBtnText = 'Return to the form!';\n\n          const cancelCb = () => {\n            getState();\n          };\n\n          const confirmCb = () => {\n            history.push(url);\n            setStateTab('form');\n          };\n\n          dialogBox({\n            msg,\n            cancelBtnText,\n            confirmBtnText,\n            cancelCb,\n            confirmCb\n          });\n        }\n      } catch (err) {\n        setAlert(`We think you may have some unsaved changes. Unfortunately due to server error we weren't able to proceed them. Please check the last form you were working on.`, 'danger', null, false, 15000);\n      }\n    };\n  }, []);\n};","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/components/form/utils/handleUnsavedChanges.js"],"names":["axios","Redirect","dialogBox","useEffect","alertUnsavedChanges","state","getState","setStateTab","http","url","history","setAlert","stateDB","get","JSON","stringify","details","data","msg","cancelBtnText","confirmBtnText","cancelCb","confirmCb","push","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,SAAT,QAA0B,yBAA1B;AACA,SAASC,SAAT,QAA0B,OAA1B;AAEA,OAAO,MAAMC,mBAAmB,GAAG,OAC/BD,SAD+B,EAE/BE,KAF+B,EAG/BC,QAH+B,EAI/BC,WAJ+B,EAK/BC,IAL+B,EAKzB;AACNC,GAN+B,EAM1B;AACLC,OAP+B,EAQ/BC,QAR+B,KAS9B;AACDR,EAAAA,SAAS,CAAC,MAAM;AACZ,WAAO,YAAY;AACf,UAAI;AACA,cAAMS,OAAO,GAAG,MAAMZ,KAAK,CAACa,GAAN,CAAUL,IAAV,CAAtB;;AAEA,YACIM,IAAI,CAACC,SAAL,CAAeV,KAAK,CAACW,OAArB,MACAF,IAAI,CAACC,SAAL,CAAeH,OAAO,CAACK,IAAR,CAAaD,OAA5B,CAFJ,EAGE;AACE,gBAAME,GAAG,GAAI,2DAAb;AACA,gBAAMC,aAAa,GAAG,mBAAtB;AACA,gBAAMC,cAAc,GAAG,qBAAvB;;AACA,gBAAMC,QAAQ,GAAG,MAAM;AACnBf,YAAAA,QAAQ;AACX,WAFD;;AAGA,gBAAMgB,SAAS,GAAG,MAAM;AACpBZ,YAAAA,OAAO,CAACa,IAAR,CAAad,GAAb;AACAF,YAAAA,WAAW,CAAC,MAAD,CAAX;AACH,WAHD;;AAIAL,UAAAA,SAAS,CAAC;AACNgB,YAAAA,GADM;AAENC,YAAAA,aAFM;AAGNC,YAAAA,cAHM;AAINC,YAAAA,QAJM;AAKNC,YAAAA;AALM,WAAD,CAAT;AAOH;AACJ,OAzBD,CAyBE,OAAOE,GAAP,EAAY;AACVb,QAAAA,QAAQ,CACH,gKADG,EAEJ,QAFI,EAGJ,IAHI,EAIJ,KAJI,EAKJ,KALI,CAAR;AAOH;AACJ,KAnCD;AAoCH,GArCQ,EAqCN,EArCM,CAAT;AAsCH,CAhDM","sourcesContent":["import axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { dialogBox } from '../../alerts/alertsFuns';\nimport { useEffect } from 'react';\n\nexport const alertUnsavedChanges = async (\n    useEffect,\n    state,\n    getState,\n    setStateTab,\n    http, //api call\n    url, //redirection back to the form\n    history,\n    setAlert\n) => {\n    useEffect(() => {\n        return async () => {\n            try {\n                const stateDB = await axios.get(http);\n\n                if (\n                    JSON.stringify(state.details) !==\n                    JSON.stringify(stateDB.data.details)\n                ) {\n                    const msg = `You have some unsaved changes. What would you like to do?`;\n                    const cancelBtnText = 'Discharge updates';\n                    const confirmBtnText = 'Return to the form!';\n                    const cancelCb = () => {\n                        getState();\n                    };\n                    const confirmCb = () => {\n                        history.push(url);\n                        setStateTab('form');\n                    };\n                    dialogBox({\n                        msg,\n                        cancelBtnText,\n                        confirmBtnText,\n                        cancelCb,\n                        confirmCb,\n                    });\n                }\n            } catch (err) {\n                setAlert(\n                    `We think you may have some unsaved changes. Unfortunately due to server error we weren't able to proceed them. Please check the last form you were working on.`,\n                    'danger',\n                    null,\n                    false,\n                    15000\n                );\n            }\n        };\n    }, []);\n};\n"]},"metadata":{},"sourceType":"module"}