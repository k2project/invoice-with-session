{"ast":null,"code":"var _jsxFileName = \"/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/register/Register.js\";\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport './Register.scss';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAlert } from '../../redux/actions/messages';\nimport Logo from '../../components/logo/Logo';\nimport FormInput from '../../components/form/components/FormInput';\nimport FormErrorsDisplay from '../../components/form/components/FormErrorsDisplay';\nimport { formErrorsStyling } from '../../components/form/utils/formFuns';\n\nconst Register = ({\n  setAlert\n}) => {\n  const deleteAccount = async e => {\n    e.preventDefault();\n    const {\n      email,\n      password,\n      password2\n    } = formData;\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      const body = JSON.stringify({\n        email,\n        password,\n        password2\n      });\n      await axios.post('api/user/register', body, config); //registered successefully\n\n      setAlert('Account hass been created successfully. Please sign in. ', 'success', 'login page', false);\n      history.push('/');\n      setFormData(initState);\n    } catch (err) {\n      console.log('REGISTER FORM ERR:', err);\n      setFormData({ ...formData,\n        errors: err.response.data.errors\n      });\n    }\n  };\n\n  const initState = {\n    email: '',\n    password: '',\n    password2: '',\n    errors: []\n  };\n  const [formData, setFormData] = useState(initState);\n  useEffect(() => {\n    formErrorsStyling(formData.errors);\n  }, [formData.errors]);\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"register\",\n    id: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, \"Register Your Account\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"register-form\",\n    onSubmit: deleteAccount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    type: \"email\",\n    name: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    type: \"password\",\n    name: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(FormInput, {\n    form: {\n      formData,\n      setFormData\n    },\n    type: \"password\",\n    name: \"password2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, \"Password confirmation\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn--form btn--theme\",\n    onMouseDown: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"Create Account*\")), formData.errors.length > 0 && /*#__PURE__*/React.createElement(FormErrorsDisplay, {\n    errors: formData.errors,\n    label: \"Register form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, \"*The registration is free and only takes a minute.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Already have an account?\", ' ', /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"link--themed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, \"Sign in.\"))));\n};\n\nRegister.propTypes = {\n  setAlert: PropTypes.func\n};\n\nconst mapStateToProps = state => ({});\n\nconst mapDispatchToProps = {\n  setAlert\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);","map":{"version":3,"sources":["/Users/krispol/Desktop/invoice/invoice-with-session/client/src/pages/register/Register.js"],"names":["axios","React","useState","useEffect","PropTypes","Link","connect","setAlert","Logo","FormInput","FormErrorsDisplay","formErrorsStyling","Register","deleteAccount","e","preventDefault","email","password","password2","formData","config","headers","body","JSON","stringify","post","history","push","setFormData","initState","err","console","log","errors","response","data","length","propTypes","func","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport './Register.scss';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAlert } from '../../redux/actions/messages';\nimport Logo from '../../components/logo/Logo';\nimport FormInput from '../../components/form/components/FormInput';\nimport FormErrorsDisplay from '../../components/form/components/FormErrorsDisplay';\nimport { formErrorsStyling } from '../../components/form/utils/formFuns';\n\nconst Register = ({ setAlert }) => {\n    const deleteAccount = async (e) => {\n        e.preventDefault();\n        const { email, password, password2 } = formData;\n        try {\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            };\n\n            const body = JSON.stringify({ email, password, password2 });\n            await axios.post('api/user/register', body, config);\n            //registered successefully\n            setAlert(\n                'Account hass been created successfully. Please sign in. ',\n                'success',\n                'login page',\n                false\n            );\n            history.push('/');\n\n            setFormData(initState);\n        } catch (err) {\n            console.log('REGISTER FORM ERR:', err);\n            setFormData({\n                ...formData,\n                errors: err.response.data.errors,\n            });\n        }\n    };\n    const initState = {\n        email: '',\n        password: '',\n        password2: '',\n        errors: [],\n    };\n    const [formData, setFormData] = useState(initState);\n    useEffect(() => {\n        formErrorsStyling(formData.errors);\n    }, [formData.errors]);\n    return (\n        <main className='register' id='main'>\n            <section className='register'>\n                <Logo />\n                <h1 className='sr-only'>Register Your Account</h1>\n                <form className='register-form' onSubmit={deleteAccount}>\n                    <FormInput\n                        form={{ formData, setFormData }}\n                        type='email'\n                        name='email'\n                    >\n                        Email\n                    </FormInput>\n                    <FormInput\n                        form={{ formData, setFormData }}\n                        type='password'\n                        name='password'\n                    >\n                        Password\n                    </FormInput>\n                    <FormInput\n                        form={{ formData, setFormData }}\n                        type='password'\n                        name='password2'\n                    >\n                        Password confirmation\n                    </FormInput>\n\n                    <button\n                        className='btn btn--form btn--theme'\n                        onMouseDown={(e) => e.preventDefault()}\n                    >\n                        Create Account*\n                    </button>\n                </form>\n                {formData.errors.length > 0 && (\n                    <FormErrorsDisplay\n                        errors={formData.errors}\n                        label='Register form'\n                    />\n                )}\n                <p>*The registration is free and only takes a minute.</p>\n                <p>\n                    Already have an account?{' '}\n                    <Link to='/' className='link--themed'>\n                        Sign in.\n                    </Link>\n                </p>\n            </section>\n        </main>\n    );\n};\n\nRegister.propTypes = {\n    setAlert: PropTypes.func,\n};\nconst mapStateToProps = (state) => ({});\nconst mapDispatchToProps = {\n    setAlert,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);\n"]},"metadata":{},"sourceType":"module"}